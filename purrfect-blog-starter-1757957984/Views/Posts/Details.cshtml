@model purrfect_blog_starter_1757957984.Models.Post
@{
    @* Post details page: shows full title, content, date, category *@
    ViewBag.Title = Model?.Title ?? "Post";
}

<div class="mt-3 d-flex align-items-center justify-content-between">
    <h2 class="mb-0 post-title-text">@Model.Title</h2>

    <div class="d-flex gap-2">
        <a class="btn btn-secondary" href="@Url.Action("Index", "Posts")">Back to Posts</a>
    </div>
</div>

@* Created date and optional category *@
<div class="text-muted mt-2">
    <small>@Model.CreatedAt.ToLocalTime().ToString("f")</small>
    @if (!string.IsNullOrWhiteSpace(Model.Category))
    {
        <span class="badge bg-warning text-dark" style="margin-left:8px;">@Model.Category</span>
    }
</div>

<hr />

<div style="white-space: pre-wrap;">
    @Model.Content
</div>

<div class="d-flex justify-content-end mt-3">
    @if (User != null && User.Identity != null && User.Identity.IsAuthenticated
        && string.Equals(Model.AuthorUsername, User.Identity.Name, StringComparison.OrdinalIgnoreCase))
    {
        <a class="btn btn-warning me-2" href="@Url.RouteUrl("EditPost", new { id = Model.Id })">Edit</a>

        using (Html.BeginForm("Delete", "Posts", new { id = Model.Id }, FormMethod.Post, new { onsubmit = "return confirm('Are you sure you want to delete this post? This cannot be undone.');", @class = "d-inline" }))
        {
            @Html.AntiForgeryToken()
            <button type="submit" class="btn btn-danger">Delete</button>
        }
    }
</div>